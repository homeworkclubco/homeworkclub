---
import BaseHead from '@components/BaseHead.astro'
import Header from '@components/Header.astro'
import Footer from '@components/Footer.astro'
import BaseFoot from '@components/BaseFoot.astro'
import client from '@tina/__generated__/client'
import HomePage from '@tina/pages/HomePage.tsx'
import { Blocks } from '@tina/blocks'
import Error404 from '@components/Error404.astro'

let page

try {
  const data = await client.queries.page({ relativePath: 'work.mdx' })
  page = data.data.page
} catch (error) {
  console.error('Error fetching page data:', error)
  page = null
}
---

<!doctype html>
<html lang="en">
  <head>
    {page && <BaseHead pageSeo={page.seo} />}
  </head>
  <body data-accent-color="primary">
    <Header />
    {
      page ?
        <>
          {/* <HomePage {...data} client:tina /> */}
          <Blocks blocks={page.blocks} client:tina />
        </>
      : <Error404 />
    }
    <Footer />
    <BaseFoot />
  </body>
</html>
